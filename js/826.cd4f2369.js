"use strict";(self["webpackChunkpet_shop"]=self["webpackChunkpet_shop"]||[]).push([[826],{1530:function(e,t,a){function l(e){return{all:e=e||new Map,on:function(t,a){var l=e.get(t);l?l.push(a):e.set(t,[a])},off:function(t,a){var l=e.get(t);l&&(a?l.splice(l.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var l=e.get(t);l&&l.slice().map((function(e){e(a)})),(l=e.get("*"))&&l.slice().map((function(e){e(t,a)}))}}}a.d(t,{Z:function(){return r}});const s=l();var r=s},8826:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var l=a(6252),s=a(3577),r=a(9963);const o={class:"container"},i={class:"row justify-content-between"},n={class:"col-md-5 bg-white py-6 px-5"},c=["src"],d={class:"w-100 p-3 position-relative"},m={class:"mb-0 fw-bold"},u={class:"mb-1 text-muted",style:{height:"1.5rem",overflow:"hidden"}},p={class:"d-flex justify-content-between align-items-center w-100"},b={class:"input-group w-50 align-items-center"},f=["value"],h={class:"mb-0 ms-auto"},_={style:{"margin-left":"124px"}},v={class:"table mt-4 text-muted"},g={scope:"row",class:"border-0 px-0 font-weight-normal"},w={class:"text-end border-0 px-0"},y={class:"d-flex justify-content-between mt-4"},x=(0,l._)("p",{class:"mb-0 h4 fw-bold"},"總金額",-1),V={class:"mb-0 h4 fw-bold"},D={class:"col-md-5 bg-white py-6 px-5"},k={class:"my-5 row justify-content-center"},W={class:"mb-3"},C=(0,l._)("label",{for:"email",class:"form-label"},"Email",-1),q={class:"mb-3"},$=(0,l._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),z={class:"mb-3"},U=(0,l._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),j={class:"mb-3"},E=(0,l._)("label",{for:"address",class:"form-label"},"收件人地址",-1),N={class:"mb-3"},M=(0,l._)("label",{for:"message",class:"form-label"},"留言",-1),S={class:"text-end"},F=["disabled"];function T(e,t,a,T,Z,H){const K=(0,l.up)("Field"),P=(0,l.up)("ErrorMessage"),Y=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",i,[(0,l._)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Z.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"d-flex mt-4 bg-light",key:e.id},[(0,l._)("img",{src:e.product.imageUrl,alt:"",style:{width:"120px",height:"120px","object-fit":"cover"}},null,8,c),(0,l._)("div",d,[(0,l._)("p",m,(0,s.zw)(e.product.title),1),(0,l._)("p",u,(0,s.zw)(e.product.description),1),(0,l._)("div",p,[(0,l._)("div",b,[(0,l._)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light px-0",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",disabled:"",value:e.qty},null,8,f)]),(0,l._)("p",h,"NT$"+(0,s.zw)(e.product.price),1)])])])))),128)),(0,l._)("div",_,[(0,l._)("table",v,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Z.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id+"1"},[(0,l._)("th",g,(0,s.zw)(e.product.title),1),(0,l._)("td",w,(0,s.zw)(Number(e.final_total)),1)])))),128))])]),(0,l._)("div",y,[x,(0,l._)("p",V,"NT$"+(0,s.zw)(H.totalMoney),1)])])]),(0,l._)("div",D,[(0,l._)("div",k,[(0,l.Wm)(Y,{ref:"form",class:"col-md-12",onSubmit:H.onSubmit},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",W,[C,(0,l.Wm)(K,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:Z.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(P,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",q,[$,(0,l.Wm)(K,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:Z.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>Z.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(P,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",z,[U,(0,l.Wm)(K,{id:"tel",name:"電話",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:H.isPhone,modelValue:Z.user.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>Z.user.phone=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(P,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",j,[E,(0,l.Wm)(K,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:Z.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>Z.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(P,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",N,[M,(0,l.wy)((0,l._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>Z.user.msg=e)},null,512),[[r.nr,Z.user.msg]])]),(0,l._)("div",S,[(0,l._)("button",{type:"submit",class:"btn btn-danger",disabled:0===Z.cartData.carts.length},"確認結帳",8,F)])])),_:1},8,["onSubmit"])])])])])}var Z=a(1530),H={data(){return{cartData:{carts:[]},user:{email:"",name:"",address:"",phone:"",msg:""}}},methods:{isRequired(e){return!!e||"This field is required"},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/larrylinr5/cart").then((e=>{this.cartData=e.data.data}))},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},onSubmit(){this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/larrylinr5/carts").then((()=>{alert("結帳完成"),Z.Z.emit("get-cart"),this.$refs.form.resetForm(),this.$router.push("/home")})).catch((()=>{alert("結帳失敗")}))}},computed:{totalMoney(){let e=0;return this.cartData.carts.forEach((t=>{e+=Number(t.final_total)*Number(t.qty)})),e}},mounted(){this.getCart()}},K=a(3744);const P=(0,K.Z)(H,[["render",T]]);var Y=P}}]);
//# sourceMappingURL=826.cd4f2369.js.map