"use strict";(self["webpackChunkpet_shop"]=self["webpackChunkpet_shop"]||[]).push([[342],{8342:function(t,e,a){a.r(e),a.d(e,{default:function(){return W}});var i=a(6252),s=a(3577);const r={class:"container"},l={class:"row justify-content-center"},o={class:"col-md-6 bg-white py-5",style:{"min-height":"calc(100vh - 56px - 76px)"}},n=(0,i._)("div",{class:"d-flex justify-content-between"},[(0,i._)("h2",{class:"mt-2"},"Cart Detail")],-1),c={class:"table mt-4 text-muted"},d={scope:"row",class:"border-0 px-0 font-weight-normal"},u={class:"text-end border-0 px-0"},p={class:"d-flex justify-content-between mt-4"},h=(0,i._)("p",{class:"mb-0 h4 fw-bold"},"總金額",-1),m={class:"mb-0 h4 fw-bold"},b=(0,i.Uk)("前往結帳");function y(t,e,a,y,w,_){const v=(0,i.up)("CartObj"),g=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",l,[(0,i._)("div",o,[n,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.cartData.carts,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"d-flex mt-4 bg-light",key:t.id},[(0,i.Wm)(v,{item:t,onGetCart:e[0]||(e[0]=t=>_.getCart())},null,8,["item"])])))),128)),(0,i._)("table",c,[(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.cartData.carts,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id+"1"},[(0,i._)("th",d,(0,s.zw)(t.product.title),1),(0,i._)("td",u,(0,s.zw)(Number(t.final_total)),1)])))),128))])]),(0,i._)("div",p,[h,(0,i._)("p",m,"NT$"+(0,s.zw)(_.totalMoney),1)]),(0,i.Wm)(g,{class:"btn btn-dark btn-block mt-4 rounded-0 py-3",style:{"text-decoration":"none"},to:"/table"},{default:(0,i.w5)((()=>[b])),_:1})])])])}var w=a(9963);const _=["src"],v={class:"w-100 p-3 position-relative"},g=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),f=[g],x={class:"mb-0 fw-bold"},C={class:"mb-1 text-muted",style:{height:"1.5rem",overflow:"hidden"}},k={class:"d-flex justify-content-between align-items-center w-100"},N={class:"input-group w-50 align-items-center"},q={class:"input-group-prepend pe-1"},D=(0,i._)("i",{class:"bi bi-dash"},null,-1),$=[D],j={class:"input-group-append ps-1"},z=(0,i._)("i",{class:"bi bi-plus"},null,-1),I=[z],U={class:"mb-0 ms-auto"};function M(t,e,a,r,l,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("img",{src:a.item.product.imageUrl,alt:"",style:{width:"120px",height:"120px","object-fit":"cover"}},null,8,_),(0,i._)("div",v,[(0,i._)("a",{href:"#",class:"position-absolute",style:{top:"16px",right:"16px"},onClick:e[0]||(e[0]=(0,w.iM)(((...t)=>o.removeCartItem&&o.removeCartItem(...t)),["prevent"]))},f),(0,i._)("p",x,(0,s.zw)(a.item.product.title),1),(0,i._)("p",C,(0,s.zw)(a.item.product.description),1),(0,i._)("div",k,[(0,i._)("div",N,[(0,i._)("div",q,[(0,i._)("a",{href:"#",style:{"text-decoration":"none",color:"black"},onClick:e[1]||(e[1]=(0,w.iM)(((...t)=>o.minusNum&&o.minusNum(...t)),["prevent"]))},$)]),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light px-0",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":e[2]||(e[2]=t=>l.qty=t)},null,512),[[w.nr,l.qty]]),(0,i._)("div",j,[(0,i._)("a",{href:"#",style:{"text-decoration":"none",color:"black"},onClick:e[3]||(e[3]=(0,w.iM)(((...t)=>o.addNum&&o.addNum(...t)),["prevent"]))},I)])]),(0,i._)("p",U,"NT$"+(0,s.zw)(a.item.product.price),1)])])],64)}var H={props:["item"],data(){return{qty:"1"}},methods:{removeCartItem(){this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/larrylinr5/cart/${this.item.id}`).then((()=>{this.$emit("get-cart")})).catch((()=>{alert("刪除失敗")}))},addNum(){this.qty=Number(this.qty)+1,this.UpdateCartItem()},minusNum(){Number(this.qty)<=1?this.qty=1:this.qty=Number(this.qty)-1,this.UpdateCartItem()},UpdateCartItem(){const t={product_id:this.item.id,qty:Number(this.qty)};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/larrylinr5/cart/${this.item.id}`,{data:t}).then((t=>{this.$emit("get-cart")})).catch((()=>{alert("更新失敗")}))}},mounted(){this.qty=this.item.qty}},Y=a(3744);const E=(0,Y.Z)(H,[["render",M]]);var K=E,O={data(){return{cartData:{carts:[]}}},components:{CartObj:K},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/larrylinr5/cart").then((t=>{this.cartData=t.data.data}))}},computed:{totalMoney(){let t=0;return this.cartData.carts.forEach((e=>{t+=Number(e.final_total)})),t}},mounted(){this.getCart()}};const T=(0,Y.Z)(O,[["render",y]]);var W=T}}]);
//# sourceMappingURL=342.99a9dcd1.js.map